
// Modal content data
const timelineContent = {
    "limited-war-intro": {
        title: "Chiến tranh cục bộ của Mỹ ở miền Nam",
        date: "1965",
        content: `
            <p>Cuộc "Chiến tranh cục bộ" mà Mỹ tiến hành ở miền Nam là cuộc chiến tranh quy mô lớn nhất từ sau Thế chiến II. Đầu mùa khô 1965-1966, Mỹ huy động 700.000 quân (gần 200.000 quân Mỹ) mở cuộc phản công chiến lược lần thứ nhất vào ba hướng chính:</p>
            
            <ul>
                <li>Tây Nguyên</li>
                <li>Đồng bằng Khu V</li>
                <li>Miền Đông Nam Bộ</li>
            </ul>
            
            <div class="highlight">
                <p>Mục tiêu của Mỹ là "tìm diệt" quân giải phóng, giành lại quyền chủ động chiến trường, và "bình định" các vùng nông thôn quan trọng.</p>
            </div>
            
            <img src="https://d4.violet.vn/uploads/blogs/447/chien_tranh_cuc_bo_500.jpg" alt="Bản đồ chiến tranh cục bộ">
            
            <p>Đây là một bước leo thang nghiêm trọng của Mỹ trong chiến tranh xâm lược Việt Nam, khi họ trực tiếp đưa quân vào tham chiến với quy mô lớn thay vì chỉ đóng vai trò cố vấn như trước đây.</p>
        `
    },
    "viet-victories": {
        title: "Những chiến thắng đầu tiên",
        date: "1965-1966",
        content: `
            <p>Quân dân miền Nam đã anh dũng đánh trả, giành nhiều thắng lợi quan trọng:</p>
            
            <ul>
                <li><strong>Trận Núi Thành</strong> (tháng 5-1965)</li>
                <li><strong>Trận Vạn Tường</strong> (tháng 8-1965)</li>
                <li><strong>Trận Plâyme</strong> (tháng 11-1965)</li>
            </ul>
            
            <img src="https://www.dinhnghia.com.vn/wp-content/uploads/2022/09/chien-thang-van-tuong-1965-dien-bien-ket-qua-va-y-nghia-3.jpg" alt="Chiến thắng Vạn Tường">
            
            <div class="highlight">
                <p>Những thắng lợi này đã làm thất bại kế hoạch "tìm diệt" và "bình định" của Mỹ. Miền Bắc cũng bước đầu đánh thắng chiến tranh phá hoại, đảm bảo chi viện hiệu quả cho miền Nam.</p>
            </div>
            
            <p>Sau chiến thắng Vạn Tường, phong trào đánh Mỹ lan rộng khắp miền Nam. Quân giải phóng chủ động tiến công vào các căn cứ, kho hậu cần, và sào huyệt của địch, đặc biệt là ở Sài Gòn.</p>
            
            <p>Kế hoạch lập 900 ấp chiến lược và củng cố hàng chục ngàn ấp cũ của Mỹ và ngụy quyền đã thất bại hoàn toàn.</p>
        `
    },
    "second-offensive": {
        title: "Cuộc tiến công lần hai của Mỹ",
        date: "1966-1967",
        content: `
            <p>Đến mùa khô 1966-1967, Mỹ mở cuộc tiến công lần thứ hai với lực lượng hùng hậu:</p>
            
            <ul>
                <li>390.000 quân Mỹ</li>
                <li>50.000 quân chư hầu</li>
                <li>540.000 quân ngụy</li>
                <li>4.000 máy bay</li>
                <li>2.500 xe tăng</li>
            </ul>
            
            <img src="https://th.bing.com/th/id/R.62ea7aeb6dd70566e667f3cd1cdb4382?rik=V0Y7vBF1hO%2baEA&riu=http%3a%2f%2fnghiencuuquocte.org%2fwp-content%2fuploads%2f2020%2f03%2f08.jpg&ehk=0UG06HgOQnhNR95CwI6XXqj%2btOJ0NExIs7u4w%2bbj8Hs%3d&risl=&pid=ImgRaw&r=0" alt="Quân Mỹ tại Việt Nam">
            
            <div class="highlight">
                <p>Tuy nhiên, tất cả các cuộc hành quân của địch đều bị quân ta đánh bại, gây tổn thất nặng nề.</p>
            </div>
            
            <p>Trên mặt trận chống "bình định", quân dân miền Nam kiên trì phương châm "bốn bám" và đẩy mạnh "ba mũi giáp công", ngăn chặn thành công các cuộc càn quét và bình định của Mỹ-ngụy.</p>
            
            <p>Kế hoạch chiếm 50% nông thôn của địch năm 1967 đã thất bại. Thay vào đó, 80% đất đai miền Nam nằm dưới sự kiểm soát của Mặt trận Dân tộc Giải phóng.</p>
            
            <p>Phong trào đấu tranh chính trị ở miền Nam tiếp tục phát triển mạnh mẽ, đặc biệt tại Huế và Đà Nẵng, với các khẩu hiệu đòi lật đổ chính quyền tay sai Mỹ và yêu cầu Mỹ rút quân.</p>
        `
    },
    "diplomatic-front": {
        title: "Mở mặt trận ngoại giao",
        date: "1967",
        content: `
            <p>Cuối năm 1967, Mỹ đẩy cuộc "Chiến tranh cục bộ" lên đỉnh cao với 480.000 quân viễn chinh, nhưng vẫn không đạt được mục tiêu chính trị và quân sự. Thất bại ở Việt Nam khiến tình hình nước Mỹ bất ổn, người dân biểu tình phản đối chiến tranh.</p>
            
            <img src="https://th.bing.com/th/id/R.fabb48d69795dd2aef16cd25324e0ccb?rik=MGqlRz1JeJ8HTQ&riu=http%3a%2f%2fnghiencuuquocte.org%2fwp-content%2fuploads%2f2019%2f10%2fVietnam_War_protestors.jpg&ehk=n6MvdEh8pyfFvv1UlIiCIhyQFkbW3l4Nh5d%2b%2fiNryDM%3d&risl=&pid=ImgRaw&r=0&sres=1&sresct=1" alt="Biểu tình phản chiến tại Mỹ">
            
            <div class="highlight">
                <p>Ngày 28-1-1967, Hội nghị lần thứ 13 Ban Chấp hành Trung ương Đảng quyết định mở mặt trận ngoại giao, tranh thủ sự ủng hộ quốc tế, tạo cục diện "vừa đánh, vừa đàm".</p>
            </div>
            
            <p>Cục diện vừa đánh, vừa đàm là một chiến lược hoàn toàn mới, nhằm phát huy sức mạnh tổng hợp để đánh Mỹ trên mọi phương diện.</p>
            
            <p>Tháng 12-1967, Bộ Chính trị ra nghị quyết lịch sử, chuyển cuộc chiến tranh cách mạng miền Nam sang thời kỳ mới, tiến tới giành thắng lợi quyết định bằng phương pháp tổng công kích - tổng khởi nghĩa. Nghị quyết này được Hội nghị lần thứ 14 Ban Chấp hành Trung ương Đảng (khóa III) họp tháng 1-1968 thông qua.</p>
        `
    },
    "tet-offensive": {
        title: "Tổng tiến công Tết Mậu Thân",
        date: "1968",
        content: `
            <p>Từ 24-1 đến 15-7-1968, Quân giải phóng mở <span class = "highlight-text" data-keyword ="Chiến dịch đường 0 Khe Sanh"> chiến dịch đường 0 Khe Sanh </span>. Đêm 30 rạng ngày 21-1-1968, đúng dịp giao thừa Tết Mậu Thân, thừa lúc địch sơ hở, cuộc tổng tiến công và nổi dậy đợt I đã được phát động trên toàn miền Nam.</p>
            
            <div class="highlight">
                <p>Quân ta đồng loạt tiến công địch từ Đường 9 - Khe Sanh đến ĐBSCL, đặc biệt mạnh mẽ tại Sài Gòn - Gia Định, Huế.</p>
            </div>
            
            <p>Lực lượng biệt động Sài Gòn đóng vai trò quan trọng với anh hùng biệt động Sài Gòn Trần Văn Lai với 3 ngôi nhà giấu vũ khí ở nội đô Sài Gòn. Quân giải phóng làm chủ thành phố Huế 25 ngày, gây tổn thất nặng nề cho địch.</p>
            
            <div class="image-row">
                <img src="https://image.baophapluat.vn/w840/Uploaded/2025/athlraqhpghat/2018_07_29/ong_lai_AASS.jpg" alt="Anh hùng Trần Văn Lai">
                
                <img src="https://nqs.1cdn.vn/thumbs/1200x630/2024/03/12/t.ex-cdn.com-chatluongvacuocsong.vn-resize-534x280-files-content-2024-03-12-_ben-trong-can-ham-chua-2-tan-vu-khi-nam-giua-long-tp-hcm-tung-la-dia-chi-do-bi-mat-cua-biet-dong-sai-gon-1555.jpeg" alt="Căn hầm vũ khí">
            </div>
            
            <p>Cuộc tấn công tháng 5 và tháng 8-1968, quân dân ta tiêu diệt chục vạn kẻ địch, phá hủy nhiều phương tiện, giải phóng hàng triệu đồng bào. Hàng triệu quần chúng nổi dậy giành quyền làm chủ ở những mức độ khác nhau.</p>
            
            <p>Tổng tiến công và nổi dậy Tết Mậu Thân 1968 là một chủ trương táo bạo và sáng tạo của Đảng, đánh thẳng vào ý chí xâm lược của Mỹ. Chiến lược "Chiến tranh cục bộ" của đế quốc Mỹ phá sản.</p>
        `
    },
    "paris-talks": {
        title: "Hội nghị Paris và kết quả",
        date: "1968-1969",
        content: `
            <p>Mỹ buộc phải đàm phán với Việt Nam tại <span class = "highlight-text" data-keyword = "Hội nghị Paris (Pháp)> Hội nghị Paris (Pháp) từ 13-5-1968</span>. Phái đoàn do <span class = "highlight-text" data-keyword = "Bộ trưởng Xuân Thuỷ"> Bộ trưởng Xuân Thủy </span> làm Trưởng đoàn và <span class = "highlight-text" data-keyword = "Đồng chí Lê Đức Thọ"> đồng chí Lê Đức Thọ ủy viên Bộ Chính trị </span> làm cố vấn.</p>
            
            <img src="https://file3.qdnd.vn/data/images/0/2022/04/24/tvtuongvy/hoi%20nghi%20paris%201.jpeg?dpi=150&quality=100&w=870" alt="Hội nghị Paris">
            
            <p>Tháng 1-1969, Mỹ phải chấp nhận cuộc đàm phán với Chính phủ nước Việt Nam dân chủ Cộng hòa tại Paris, có sự tham gia của đoàn đại biểu Mặt trận dân tộc giải phóng miền Nam Việt Nam.</p>
            
            <div class="highlight">
                <p>Ngày 6-6-1969, Chính phủ cách mạng lâm thời Cộng Hòa miền Nam Việt Nam được thành lập do <span class = "highlight-text" data-keyword = "Kiến trúc sư Huỳnh Tấn Phát"> kiến trúc sư Huỳnh Tấn Phát </span> làm Chủ tịch và <span class = "highlight-text" data-keyword = "Bộ trưởng Bộ Ngoại giao Nguyễn Thị Bình"> Bộ trưởng Bộ Ngoại giao Nguyễn Thị Bình </span> làm Trưởng đoàn.</p>
            </div>
            
            <div class="image-row">
                <img src="https://cdn2.tuoitre.vn/zoom/700_390/471584752817336320/2023/1/19/paris-5-1674095397328427869330-88-19-1125-2000-crop-1674096844825265632067.jpg" alt="Lê Đức Thọ và Henry Kissinger">
                
                <img src="https://baotanglichsu.vn/DataFiles/Uploaded/image/Kienthuc-Madam-Binh-06.jpg" alt="Bộ trưởng Nguyễn Thị Bình">
            </div>
            
            <p>Mặc dù Tết Mậu Thân đánh bại ý chí xâm lược của Mỹ, tạo bước ngoặt chiến lược, nhưng sau đó, ta đã mắc sai lầm trong chỉ đạo chiến lược. Việc tiếp tục mở các đợt tiến công vào đô thị khi không còn yếu tố bất ngờ đã dẫn đến tổn thất lớn về lực lượng và thế trận.</p>
            
            <div class="highlight">
                <p>"Tết Mậu Thân thắng rất lớn, mà nhất là đánh bại được ý chí xâm lược của Mỹ, tạo nên bước ngoặt quyết định của chiến tranh. Nhưng sau đó ta chuyển chậm, chủ trương tiếp tục các đợt tiến công vào đô thị khi không còn điều kiện là sai lầm về chỉ đạo chiến lược, để địch gây ra cho ta nhiều khó khăn, tổn thất"</p>
            </div>
        `
    }
};

// Function to open timeline modal
function openTimelineModal(modalId) {
    const content = timelineContent[modalId];

    if (content) {
        // Set modal content
        document.getElementById('timeline-modal-title').textContent = content.title;
        document.getElementById('timeline-modal-date').textContent = content.date;
        document.getElementById('timeline-modal-body').innerHTML = content.content;

        // Show modal
        const modal = document.getElementById('timeline-modal');
        modal.style.display = 'block';

        // Add active class for animation
        setTimeout(() => {
            modal.classList.add('active');
        }, 10);

        // Disable scrolling
        document.body.style.overflow = 'hidden';
    }
}

// Function to close timeline modal
function closeTimelineModal() {
    const modal = document.getElementById('timeline-modal');
    modal.classList.remove('active');

    setTimeout(() => {
        modal.style.display = 'none';
        // Enable scrolling
        document.body.style.overflow = '';
    }, 300);
}

// Add event listeners when DOM is loaded
document.addEventListener('DOMContentLoaded', function () {
    // Add click handlers to timeline events
    document.querySelectorAll('.timeline__event[data-modal-id]').forEach(event => {
        event.addEventListener('click', function () {
            const modalId = this.getAttribute('data-modal-id');
            openTimelineModal(modalId);
        });
    });

    // Close modal when clicking close button
    document.querySelector('.timeline-modal-close').addEventListener('click', closeTimelineModal);

    // Close modal when clicking outside of content
    document.getElementById('timeline-modal').addEventListener('click', function (e) {
        if (e.target === this) {
            closeTimelineModal();
        }
    });

    // Add ESC key support
    document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') {
            closeTimelineModal();
        }
    });
});
